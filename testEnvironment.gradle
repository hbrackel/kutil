apply plugin: 'org.junit.platform.gradle.plugin'

dependencies {
    testCompile "org.junit.jupiter:junit-jupiter-api:$junitJupiterVersion"
    testRuntime "org.junit.jupiter:junit-jupiter-engine:$junitJupiterVersion"
    testCompile group: 'org.hamcrest', name: 'hamcrest-all', version: hamcrestAllVersion
    testRuntime group: 'ch.qos.logback', name: 'logback-classic', version: logbackClassicVersion
    testCompile group: 'com.jayway.awaitility', name: 'awaitility', version: "$awaitilityVersion"



    testCompile("org.jetbrains.spek:spek-api:$spekVersion") {
        exclude group: 'org.jetbrains.kotlin'
    }
    testRuntime("org.jetbrains.spek:spek-junit-platform-engine:$spekVersion") {
        exclude group: 'org.junit.platform'
        exclude group: 'org.jetbrains.kotlin'
    }
}

junitPlatform {
    // https://github.com/junit-team/junit5/issues/700
    // otherwise jacoco will not be executed
    enableStandardTestTask = true

    reportsDir = file("$buildDir/test-results/test")
    filters {
        engines {
            include 'spek', 'jupiter'
        }
    }
}

